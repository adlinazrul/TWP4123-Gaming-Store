<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Checkout | NEXUS</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Rubik:wght@300;400;600&display=swap" rel="stylesheet"/>
    <style>
        :root {
            --primary: #ff0000;
            --secondary: #d10000;
            --dark: #0d0221;
            --light: #ffffff;
            --accent: #ff3333;
            --gray: #7a7a7a;
        }

        body {
            font-family: 'Rubik', sans-serif;
            background-color: var(--dark);
            color: var(--light);
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        header {
            background: var(--dark);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 20px rgba(255, 0, 0, 0.3);
        }

        .nav-menu {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
            cursor: pointer;
        }

        .cancel-btn {
            background: transparent;
            color: var(--light);
            border: 1px solid var(--gray);
            padding: 8px 20px;
            font-family: 'Rubik', sans-serif;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .cancel-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: var(--primary);
            color: var(--primary);
        }

        .checkout-container {
            max-width: 1200px;
            margin: 50px auto;
            padding: 0 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 50px;
        }

        .order-summary {
            flex: 1;
            min-width: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 30px;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }

        .order-summary h2 {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            font-size: 1.8rem;
            margin-bottom: 20px;
            position: relative;
        }

        .order-summary h2::after {
            content: '';
            position: absolute;
            width: 60px;
            height: 3px;
            background: var(--primary);
            bottom: -10px;
            left: 0;
            border-radius: 3px;
        }

        .order-item {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .order-item img {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }

        .item-details {
            flex: 1;
        }

        .item-name {
            font-family: 'Orbitron', sans-serif;
            color: var(--light);
            margin-bottom: 5px;
        }

        .item-price {
            color: var(--primary);
            font-weight: 600;
        }

        .order-total {
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .grand-total {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.3rem;
            color: var(--primary);
            margin-top: 20px;
        }

        .payment-section {
            flex: 1;
            min-width: 300px;
        }

        .payment-title {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .payment-method {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 30px;
            border: 1px solid rgba(255, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .payment-method h3 {
            font-family: 'Orbitron', sans-serif;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .card-icons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .card-icons i {
            font-size: 2rem;
            color: var(--gray);
        }

        .payment-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group label {
            font-family: 'Orbitron', sans-serif;
            color: var(--light);
            font-size: 0.9rem;
            display: block;
            margin-top: 16px; /* adds space above the label */
            margin-bottom: 6px; /* keeps space between label and input */
        }

        .form-group input, .form-group select, .form-group textarea {
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 0, 0, 0.3);
            border-radius: 5px;
            color: var(--light);
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
        }

        select option {
            color: black;
            background-color: white;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 10px rgba(255, 0, 0, 0.3);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 80px;
        }

        .card-row {
            display: flex;
            gap: 15px;
        }

        .card-row .form-group {
            flex: 1;
        }

        .address-row {
            display: flex;
            gap: 15px;
        }

        .address-row .form-group {
            flex: 1;
        }

        .pay-now-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .pay-now-btn:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }

        .address-display {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }

        .address-display p {
            margin: 5px 0;
            line-height: 1.5;
        }

        .address-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            
        }

        .checkbox-group label {
    display: flex;
    align-items: center;
    gap: 10px; /* spacing between checkbox and text */
    cursor: pointer;
}

.checkbox-group input[type="checkbox"] {
    width: 18px;
    height: 18px;
    cursor: pointer;
}


        .edit-btn {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
        }

        .edit-btn:hover {
            background: rgba(255, 0, 0, 0.1);
        }

        .save-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Rubik', sans-serif;
            transition: all 0.3s ease;
        }

        .save-btn:hover {
            background: var(--accent);
        }

        .address-form {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 0, 0, 0.2);
        }
        

        footer {
            background: #0a0118;
            padding: 50px 30px 20px;
            text-align: center;
            position: relative;
            margin-top: 50px;
        }

        @media (max-width: 768px) {
            .checkout-container {
                flex-direction: column;
            }

            .card-row, .address-row {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
<header>
    <nav class="nav-menu">
        <div class="logo" onclick="window.location.href='index.html'">NEXUS</div>
        <button class="cancel-btn" id="cancelCheckout">
            <i class="fas fa-times"></i> Cancel Checkout
        </button>
    </nav>
</header>

<main class="checkout-container">
    <section class="order-summary">
        <h2>ORDER SUMMARY</h2>

        <div class="order-item">
            <img src="https://images.unsplash.com/photo-1607853202273-797f1c22a38e?ixlib=rb-1.2.1&auto=format&fit=crop&w=200&q=80" alt="PS5 Pro Controller">
            <div class="item-details">
                <h3 class="item-name">PS5 PRO CONTROLLER</h3>
                <p class="item-price">RM299.00</p>
                <p>Quantity: 1</p>
            </div>
        </div>

        <div class="order-total">
            <div class="total-row">
                <span>Subtotal:</span>
                <span>RM299.00</span>
            </div>
            <div class="total-row">
                <span>Shipping:</span>
                <span>FREE</span>
            </div>
            <div class="total-row">
                <span>Tax:</span>
                <span>RM17.94</span>
            </div>
            <div class="total-row grand-total">
                <span>Total:</span>
                <span>RM316.94</span>
            </div>
        </div>
    </section>

    <section class="payment-section">
        <h1 class="payment-title">PAYMENT & SHIPPING</h1>

        <div class="payment-method">
            <h3>SHIPPING ADDRESS</h3>
            
            <!-- Address Display Section -->
            <div class="address-display" id="addressDisplay">
                <p><strong>John Doe</strong></p>
                <p>123 Main Street</p>
                <p>Kuala Lumpur, 50000</p>
                <p>Selangor, Malaysia</p>
                <p>Phone: 012-345 6789</p>
                <div class="address-actions">
                    <button class="edit-btn" id="editAddressBtn">
                        <i class="fas fa-edit"></i> Edit Address
                    </button>
                </div>
            </div>
            
            <!-- Address Form Section (initially hidden) -->
            <div class="address-form" id="addressForm">
                <form id="checkoutForm" action="BuyNow.php" method="POST"></form>
                    <div class="address-row">
                        <div class="form-group">
                            <label for="firstName">FIRST NAME</label>
                            <input type="text" id="firstName" placeholder="John" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName">LAST NAME</label>
                            <input type="text" id="lastName" placeholder="Doe" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="address1">STREET ADDRESS</label>
                        <input type="text" id="address1" placeholder="123 Main Street" required>
                    </div>

                    <div class="address-row">
                        <div class="form-group">
                            <label for="city">CITY</label>
                            <input type="text" id="city" placeholder="Kuala Lumpur" required>
                        </div>
                        <div class="form-group">
                            <label for="state">STATE</label>
                            <select id="state" required>
                                <option value="">Select State</option>
                                <option value="JHR">Johor</option>
                                <option value="KDH">Kedah</option>
                                <option value="KTN">Kelantan</option>
                                <option value="KUL">Kuala Lumpur</option>
                                <option value="LBN">Labuan</option>
                                <option value="MLK">Malacca</option>
                                <option value="NSN">Negeri Sembilan</option>
                                <option value="PHG">Pahang</option>
                                <option value="PRK">Perak</option>
                                <option value="PLS">Perlis</option>
                                <option value="PNG">Penang</option>
                                <option value="SBH">Sabah</option>
                                <option value="SWK">Sarawak</option>
                                <option value="SGR">Selangor</option>
                                <option value="TRG">Terengganu</option>
                            </select>
                        </div>
                    </div>

                    <div class="address-row">
                        <div class="form-group">
                            <label for="postcode">POSTCODE</label>
                            <input type="text" id="postcode" placeholder="50000" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label for="country">COUNTRY</label>
                            <select id="country" required>
                                <option value="MYS" selected>Malaysia</option>
                                <option value="SGP">Singapore</option>
                                <option value="BRN">Brunei</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="phone">PHONE NUMBER</label>
                        <input type="tel" id="phone" placeholder="012-345 6789" required>
                    </div>

                    <div class="form-group">
                        <label for="notes">DELIVERY NOTES (OPTIONAL)</label>
                        <textarea id="notes" placeholder="Any special delivery instructions"></textarea>
                    </div>

                    <div class="form-group checkbox-group">
                        <label>
                            <input type="checkbox" id="saveAddress" />
                            <span>Save this address for future use</span>
                        </label>
                    </div>
                    

                    <div class="address-actions">
                        <button type="button" class="cancel-btn" id="cancelEditBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="button" class="save-btn" id="saveAddressBtn">
                            <i class="fas fa-save"></i> Save Address
                        </button>
                    </div>
                </form>
            </div>

            <h3 style="margin-top: 30px;">PAYMENT METHOD</h3>
            <div class="card-icons">
                <i class="fab fa-cc-visa"></i>
                <i class="fab fa-cc-mastercard"></i>
                <i class="fab fa-cc-amex"></i>
                <i class="fab fa-cc-discover"></i>
            </div>

            <form class="payment-form" id="checkoutForm">
                <div class="form-group">
                    <label for="cardNumber">CARD NUMBER</label>
                    <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                </div>

                <div class="form-group">
                    <label for="cardName">CARDHOLDER NAME</label>
                    <input type="text" id="cardName" placeholder="John Doe" required>
                </div>

                <div class="card-row">
                    <div class="form-group">
                        <label for="expiryDate">EXPIRY DATE</label>
                        <input type="text" id="expiryDate" placeholder="MM/YY" maxlength="5" required>
                    </div>

                    <div class="form-group">
                        <label for="cvv">CVV</label>
                        <input type="text" id="cvv" placeholder="123" maxlength="4" required>
                    </div>
                </div>

                <div class="form-group">
                    <label for="email">EMAIL</label>
                    <input type="email" id="email" placeholder="your@email.com" required>
                </div>

                <button type="submit" class="pay-now-btn">PAY RM316.94</button>
            </form>
        </div>
    </section>
</main>

<footer>
    <div class="copyright">
        &copy; 2025 NEXUS GAMING STORE. ALL RIGHTS RESERVED.<br>
        NEXUS is not affiliated with Sony or any other game publishers.
    </div>
</footer>

<script>
    document.addEventListener("DOMContentLoaded", function () {
    // DOM Elements
    const addressDisplay = document.getElementById('addressDisplay');
    const addressForm = document.getElementById('addressForm');
    const editAddressBtn = document.getElementById('editAddressBtn');
    const cancelEditBtn = document.getElementById('cancelEditBtn');
    const saveAddressBtn = document.getElementById('saveAddressBtn');
    const addressFormFields = document.getElementById('addressFormFields');
    
    // Form fields
    const firstNameInput = document.getElementById('firstName');
    const lastNameInput = document.getElementById('lastName');
    const address1Input = document.getElementById('address1');
    const cityInput = document.getElementById('city');
    const stateInput = document.getElementById('state');
    const postcodeInput = document.getElementById('postcode');
    const countryInput = document.getElementById('country');
    const phoneInput = document.getElementById('phone');
    const notesInput = document.getElementById('notes');
    const saveAddressCheckbox = document.getElementById('saveAddress');

    // Initialize form with default values
    function initializeForm() {
        firstNameInput.value = 'John';
        lastNameInput.value = 'Doe';
        address1Input.value = '123 Main Street';
        cityInput.value = 'Kuala Lumpur';
        stateInput.value = 'SGR';
        postcodeInput.value = '50000';
        countryInput.value = 'MYS';
        phoneInput.value = '012-345 6789';
    }

    // Show address form
    function showAddressForm() {
        addressDisplay.style.display = 'none';
        addressForm.style.display = 'block';
        initializeForm();
    }

    // Hide address form and show display
    function showAddressDisplay() {
        addressForm.style.display = 'none';
        addressDisplay.style.display = 'block';
    }

    // Set up event listeners
    function setupEventListeners() {
        editAddressBtn.addEventListener('click', showAddressForm);
        cancelEditBtn.addEventListener('click', showAddressDisplay);
        
        saveAddressBtn.addEventListener('click', function() {
            if (addressFormFields.checkValidity()) {
                // Update the displayed address
                const fullName = `${firstNameInput.value} ${lastNameInput.value}`;
                const addressLine1 = address1Input.value;
                const cityPostcode = `${cityInput.value}, ${postcodeInput.value}`;
                const stateCountry = `${stateInput.options[stateInput.selectedIndex].text}, ${countryInput.options[countryInput.selectedIndex].text}`;
                const phone = `Phone: ${phoneInput.value}`;
                
                // In a real app, you would save this to your database
                if (saveAddressCheckbox.checked) {
                    console.log('Address saved to account');
                }
                
                // Show confirmation
                if (confirm('Address saved successfully! Continue with payment?')) {
                    addressDisplay.innerHTML = `
                        <p><strong>${fullName}</strong></p>
                        <p>${addressLine1}</p>
                        <p>${cityPostcode}</p>
                        <p>${stateCountry}</p>
                        <p>${phone}</p>
                        <div class="address-actions">
                            <button class="edit-btn" id="editAddressBtn">
                                <i class="fas fa-edit"></i> Edit Address
                            </button>
                        </div>
                    `;
                    showAddressDisplay();
                    
                    // Reattach event listener to the new edit button
                    document.getElementById('editAddressBtn').addEventListener('click', showAddressForm);
                }
            } else {
                alert('Please fill in all required fields');
            }
        });
    }

    // Cancel checkout button functionality
    document.getElementById("cancelCheckout").addEventListener("click", function() {
        if (confirm("Are you sure you want to cancel your checkout?")) {
            window.location.href = "index.html";
        }
    });

    // Card number formatting
    const cardNumberInput = document.getElementById("cardNumber");
    cardNumberInput.addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "").substring(0, 16);
        e.target.value = value.replace(/(\d{4})(?=\d)/g, "$1 ").trim();
    });

    // Expiry date formatting
    const expiryDateInput = document.getElementById("expiryDate");
    expiryDateInput.addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "").substring(0, 4);
        if (value.length >= 3) {
            e.target.value = value.slice(0, 2) + "/" + value.slice(2);
        } else {
            e.target.value = value;
        }
    });

    // Phone number formatting
    phoneInput.addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "").substring(0, 11);
        if (value.length > 3) {
            value = value.slice(0, 3) + "-" + value.slice(3);
        }
        if (value.length > 7) {
            value = value.slice(0, 7) + " " + value.slice(7);
        }
        e.target.value = value;
    });

    // Postcode validation
    postcodeInput.addEventListener("input", function (e) {
        e.target.value = e.target.value.replace(/\D/g, "").substring(0, 5);
    });

    // Form submission
    document.getElementById("checkoutForm").addEventListener("submit", function (e) {
        e.preventDefault();
        
        // Collect all form data
        const formData = {
            firstName: firstNameInput.value,
            lastName: lastNameInput.value,
            address1: address1Input.value,
            city: cityInput.value,
            state: stateInput.value,
            postcode: postcodeInput.value,
            country: countryInput.value,
            phone: phoneInput.value,
            notes: notesInput.value,
            saveAddress: saveAddressCheckbox.checked,
            cardNumber: document.getElementById("cardNumber").value,
            cardName: document.getElementById("cardName").value,
            expiryDate: document.getElementById("expiryDate").value,
            cvv: document.getElementById("cvv").value,
            email: document.getElementById("email").value
        };
        
        // In a real application, you would send this data to your server
        console.log("Form submitted:", formData);
        
        // Show success message
        alert("Order placed successfully! Thank you for your purchase.");
        
        // Redirect to confirmation page (in a real implementation)
        // window.location.href = "order-confirmation.html";
    });

    // Initialize the page
    setupEventListeners();
});
</script>
</body>
</html>